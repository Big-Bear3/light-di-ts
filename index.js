/*! For license information please see index.js.LICENSE.txt */
!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var r in n)("object"==typeof exports?exports:e)[r]=n[r]}}(self,(()=>(()=>{var e={660:(e,t,n)=>{var r;!function(e){!function(t){var r="object"==typeof n.g?n.g:"object"==typeof self?self:"object"==typeof this?this:Function("return this;")(),o=s(e);function s(e,t){return function(n,r){"function"!=typeof e[n]&&Object.defineProperty(e,n,{configurable:!0,writable:!0,value:r}),t&&t(n,r)}}void 0===r.Reflect?r.Reflect=e:o=s(r.Reflect,o),function(e){var t=Object.prototype.hasOwnProperty,n="function"==typeof Symbol,r=n&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",o=n&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",s="function"==typeof Object.create,i={__proto__:[]}instanceof Array,a=!s&&!i,c={create:s?function(){return A(Object.create(null))}:i?function(){return A({__proto__:null})}:function(){return A({})},has:a?function(e,n){return t.call(e,n)}:function(e,t){return t in e},get:a?function(e,n){return t.call(e,n)?e[n]:void 0}:function(e,t){return e[t]}},u=Object.getPrototypeOf(Function),f="object"==typeof process&&process.env&&"true"===process.env.REFLECT_METADATA_USE_MAP_POLYFILL,p=f||"function"!=typeof Map||"function"!=typeof Map.prototype.entries?function(){var e={},t=[],n=function(){function e(e,t,n){this._index=0,this._keys=e,this._values=t,this._selector=n}return e.prototype["@@iterator"]=function(){return this},e.prototype[o]=function(){return this},e.prototype.next=function(){var e=this._index;if(e>=0&&e<this._keys.length){var n=this._selector(this._keys[e],this._values[e]);return e+1>=this._keys.length?(this._index=-1,this._keys=t,this._values=t):this._index++,{value:n,done:!1}}return{value:void 0,done:!0}},e.prototype.throw=function(e){throw this._index>=0&&(this._index=-1,this._keys=t,this._values=t),e},e.prototype.return=function(e){return this._index>=0&&(this._index=-1,this._keys=t,this._values=t),{value:e,done:!0}},e}();return function(){function t(){this._keys=[],this._values=[],this._cacheKey=e,this._cacheIndex=-2}return Object.defineProperty(t.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),t.prototype.has=function(e){return this._find(e,!1)>=0},t.prototype.get=function(e){var t=this._find(e,!1);return t>=0?this._values[t]:void 0},t.prototype.set=function(e,t){var n=this._find(e,!0);return this._values[n]=t,this},t.prototype.delete=function(t){var n=this._find(t,!1);if(n>=0){for(var r=this._keys.length,o=n+1;o<r;o++)this._keys[o-1]=this._keys[o],this._values[o-1]=this._values[o];return this._keys.length--,this._values.length--,t===this._cacheKey&&(this._cacheKey=e,this._cacheIndex=-2),!0}return!1},t.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=e,this._cacheIndex=-2},t.prototype.keys=function(){return new n(this._keys,this._values,r)},t.prototype.values=function(){return new n(this._keys,this._values,s)},t.prototype.entries=function(){return new n(this._keys,this._values,i)},t.prototype["@@iterator"]=function(){return this.entries()},t.prototype[o]=function(){return this.entries()},t.prototype._find=function(e,t){return this._cacheKey!==e&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=e)),this._cacheIndex<0&&t&&(this._cacheIndex=this._keys.length,this._keys.push(e),this._values.push(void 0)),this._cacheIndex},t}();function r(e,t){return e}function s(e,t){return t}function i(e,t){return[e,t]}}():Map,l=f||"function"!=typeof Set||"function"!=typeof Set.prototype.entries?function(){function e(){this._map=new p}return Object.defineProperty(e.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),e.prototype.has=function(e){return this._map.has(e)},e.prototype.add=function(e){return this._map.set(e,e),this},e.prototype.delete=function(e){return this._map.delete(e)},e.prototype.clear=function(){this._map.clear()},e.prototype.keys=function(){return this._map.keys()},e.prototype.values=function(){return this._map.values()},e.prototype.entries=function(){return this._map.entries()},e.prototype["@@iterator"]=function(){return this.keys()},e.prototype[o]=function(){return this.keys()},e}():Set,h=new(f||"function"!=typeof WeakMap?function(){var e=c.create(),n=r();return function(){function e(){this._key=r()}return e.prototype.has=function(e){var t=o(e,!1);return void 0!==t&&c.has(t,this._key)},e.prototype.get=function(e){var t=o(e,!1);return void 0!==t?c.get(t,this._key):void 0},e.prototype.set=function(e,t){return o(e,!0)[this._key]=t,this},e.prototype.delete=function(e){var t=o(e,!1);return void 0!==t&&delete t[this._key]},e.prototype.clear=function(){this._key=r()},e}();function r(){var t;do{t="@@WeakMap@@"+i()}while(c.has(e,t));return e[t]=!0,t}function o(e,r){if(!t.call(e,n)){if(!r)return;Object.defineProperty(e,n,{value:c.create()})}return e[n]}function s(e,t){for(var n=0;n<t;++n)e[n]=255*Math.random()|0;return e}function i(){var e,t=(e=16,"function"==typeof Uint8Array?"undefined"!=typeof crypto?crypto.getRandomValues(new Uint8Array(e)):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(e)):s(new Uint8Array(e),e):s(new Array(e),e));t[6]=79&t[6]|64,t[8]=191&t[8]|128;for(var n="",r=0;r<16;++r){var o=t[r];4!==r&&6!==r&&8!==r||(n+="-"),o<16&&(n+="0"),n+=o.toString(16).toLowerCase()}return n}}():WeakMap);function d(e,t,n){var r=h.get(e);if(P(r)){if(!n)return;r=new p,h.set(e,r)}var o=r.get(t);if(P(o)){if(!n)return;o=new p,r.set(t,o)}return o}function y(e,t,n){if(g(e,t,n))return!0;var r=S(t);return!j(r)&&y(e,r,n)}function g(e,t,n){var r=d(t,n,!1);return!P(r)&&!!r.has(e)}function v(e,t,n){if(g(e,t,n))return w(e,t,n);var r=S(t);return j(r)?void 0:v(e,r,n)}function w(e,t,n){var r=d(t,n,!1);if(!P(r))return r.get(e)}function _(e,t,n,r){d(n,r,!0).set(e,t)}function I(e,t){var n=b(e,t),r=S(e);if(null===r)return n;var o=I(r,t);if(o.length<=0)return n;if(n.length<=0)return o;for(var s=new l,i=[],a=0,c=n;a<c.length;a++){var u=c[a];s.has(u)||(s.add(u),i.push(u))}for(var f=0,p=o;f<p.length;f++)u=p[f],s.has(u)||(s.add(u),i.push(u));return i}function b(e,t){var n=[],r=d(e,t,!1);if(P(r))return n;for(var s=function(e){var t=E(e,o);if(!k(t))throw new TypeError;var n=t.call(e);if(!O(n))throw new TypeError;return n}(r.keys()),i=0;;){var a=N(s);if(!a)return n.length=i,n;var c=a.value;try{n[i]=c}catch(e){try{D(s)}finally{throw e}}i++}}function m(e){if(null===e)return 1;switch(typeof e){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===e?1:6;default:return 6}}function P(e){return void 0===e}function j(e){return null===e}function O(e){return"object"==typeof e?null!==e:"function"==typeof e}function C(e,t){switch(m(e)){case 0:case 1:case 2:case 3:case 4:case 5:return e}var n=3===t?"string":5===t?"number":"default",o=E(e,r);if(void 0!==o){var s=o.call(e,n);if(O(s))throw new TypeError;return s}return function(e,t){if("string"===t){var n=e.toString;if(k(n)&&!O(o=n.call(e)))return o;if(k(r=e.valueOf)&&!O(o=r.call(e)))return o}else{var r;if(k(r=e.valueOf)&&!O(o=r.call(e)))return o;var o,s=e.toString;if(k(s)&&!O(o=s.call(e)))return o}throw new TypeError}(e,"default"===n?"number":n)}function T(e){var t=C(e,3);return"symbol"==typeof t?t:function(e){return""+e}(t)}function M(e){return Array.isArray?Array.isArray(e):e instanceof Object?e instanceof Array:"[object Array]"===Object.prototype.toString.call(e)}function k(e){return"function"==typeof e}function x(e){return"function"==typeof e}function E(e,t){var n=e[t];if(null!=n){if(!k(n))throw new TypeError;return n}}function N(e){var t=e.next();return!t.done&&t}function D(e){var t=e.return;t&&t.call(e)}function S(e){var t=Object.getPrototypeOf(e);if("function"!=typeof e||e===u)return t;if(t!==u)return t;var n=e.prototype,r=n&&Object.getPrototypeOf(n);if(null==r||r===Object.prototype)return t;var o=r.constructor;return"function"!=typeof o||o===e?t:o}function A(e){return e.__=void 0,delete e.__,e}e("decorate",(function(e,t,n,r){if(P(n)){if(!M(e))throw new TypeError;if(!x(t))throw new TypeError;return function(e,t){for(var n=e.length-1;n>=0;--n){var r=(0,e[n])(t);if(!P(r)&&!j(r)){if(!x(r))throw new TypeError;t=r}}return t}(e,t)}if(!M(e))throw new TypeError;if(!O(t))throw new TypeError;if(!O(r)&&!P(r)&&!j(r))throw new TypeError;return j(r)&&(r=void 0),function(e,t,n,r){for(var o=e.length-1;o>=0;--o){var s=(0,e[o])(t,n,r);if(!P(s)&&!j(s)){if(!O(s))throw new TypeError;r=s}}return r}(e,t,n=T(n),r)})),e("metadata",(function(e,t){return function(n,r){if(!O(n))throw new TypeError;if(!P(r)&&!function(e){switch(m(e)){case 3:case 4:return!0;default:return!1}}(r))throw new TypeError;_(e,t,n,r)}})),e("defineMetadata",(function(e,t,n,r){if(!O(n))throw new TypeError;return P(r)||(r=T(r)),_(e,t,n,r)})),e("hasMetadata",(function(e,t,n){if(!O(t))throw new TypeError;return P(n)||(n=T(n)),y(e,t,n)})),e("hasOwnMetadata",(function(e,t,n){if(!O(t))throw new TypeError;return P(n)||(n=T(n)),g(e,t,n)})),e("getMetadata",(function(e,t,n){if(!O(t))throw new TypeError;return P(n)||(n=T(n)),v(e,t,n)})),e("getOwnMetadata",(function(e,t,n){if(!O(t))throw new TypeError;return P(n)||(n=T(n)),w(e,t,n)})),e("getMetadataKeys",(function(e,t){if(!O(e))throw new TypeError;return P(t)||(t=T(t)),I(e,t)})),e("getOwnMetadataKeys",(function(e,t){if(!O(e))throw new TypeError;return P(t)||(t=T(t)),b(e,t)})),e("deleteMetadata",(function(e,t,n){if(!O(t))throw new TypeError;P(n)||(n=T(n));var r=d(t,n,!1);if(P(r))return!1;if(!r.delete(e))return!1;if(r.size>0)return!0;var o=h.get(t);return o.delete(n),o.size>0||h.delete(t),!0}))}(o)}()}(r||(r={}))}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};return(()=>{"use strict";n.r(r),n.d(r,{AUTO:()=>k,DependencyConfig:()=>T,Inject:()=>M,Injectable:()=>C,STOP_DEEP_CONFIG:()=>x,by:()=>P,destroySingletonInstance:()=>j,of:()=>m,registerDepsConfig:()=>O}),n(660);const e={type:"multiple"},t={lazy:!1},o=Symbol("DI-AUTO"),s=Symbol("DI-STOP-DEEP-CONFIG");class i{constructor(){this.dependenciesMap=new Map}collect(e,t){this.dependenciesMap.set(e,t)}getInjectableOptions(t){return this.dependenciesMap.get(t)||e}contains(e){return this.dependenciesMap.has(e)}static getInstance(){return i.instance||(i.instance=new i),i.instance}}class a{static{this.consolePrintable=!0}static{this.histories=[]}static warn(e,t){a.histories.push({type:"warn",code:e,message:t}),a.consolePrintable&&console.warn(`(${e}) ${t}`)}static error(e,t){a.histories.push({type:"error",code:e,message:t}),a.consolePrintable&&console.error(`(${e}) ${t}`)}static throwError(e,t,n){throw a.histories.push({type:"throw",code:e,message:t}),a.consolePrintable?new Error(`(${e}) ${t}`,n):new Error}static getHistory(){return a.histories}static clearHistory(){a.histories.splice(0)}static toggleConsolePrintable(e){a.consolePrintable=e}}class c{constructor(){this.dependenciesConfigMap=new Map}collect(e,t){this.dependenciesConfigMap.has(e)&&a.warn("20003",`您在多处进行了 "${e.name}" 的依赖配置`),this.dependenciesConfigMap.set(e,t)}getConfigMethod(e){return this.dependenciesConfigMap.get(e)}static getInstance(){return c.instance||(c.instance=new c),c.instance}}class u{constructor(e,t){this.usingClass=e,this.args=t||[]}}class f{constructor(){this.singletonDependenciesMap=new WeakMap}addDependency(e,t){this.singletonDependenciesMap.set(e,t)}getDependency(e){return this.singletonDependenciesMap.get(e)}removeDependency(e){this.singletonDependenciesMap.delete(e)}static getInstance(){return f.instance||(f.instance=new f),f.instance}}class p{constructor(){}addNodeAndCheckRing(e,t){if(!t)return this.initialNode=new l(e),this.valueToNode=new Map,void this.valueToNode.set(e,this.initialNode);const n=this.valueToNode.get(t);let r=this.valueToNode.get(e);return r?(n.addNextNode(r),this.checkRing(r)):(r=new l(e),n.addNextNode(r),void this.valueToNode.set(r.value,r))}checkRing(e){const t=[{value:e,path:[e.value]}];let n=!0;for(;t.length>0;){const r=t.pop();if(!n&&r.value===e)return r.path;if(r.value.nextNodesCount()>0){const e=[];for(const t of r.value.nextNodes)e.push({value:t,path:[...r.path,t.value]});t.unshift(...e)}n&&(n=!1)}}}class l{constructor(e){this.value=e}addNextNode(e){this.nextNodes||(this.nextNodes=new Set),this.nextNodes.add(e)}nextNodesCount(){return this.nextNodes?this.nextNodes.size:0}}class h{constructor(){this.dependenciesSearcher=d.getInstance(),this.dependenciesGraph=new p,this.creatingInstanceClassQueue=[],this.isInjecting=!1}createDependency(e,t){let n=!1;this.isInjecting||(this.isInjecting=!0,n=!0);const r=this.createInstance(e,t);return n&&(h.instance=null),r}getCreatingInstanceClass(){if(0!==this.creatingInstanceClassQueue.length)return this.creatingInstanceClassQueue[this.creatingInstanceClassQueue.length-1]}createInstance(e,t){this.checkCircularDependencies(e),this.creatingInstanceClassQueue.push(e);const n=Reflect.getMetadata("design:paramtypes",e);n&&this.handleConstructorArgs(t,n,e);try{const n=y.getInstance();let r;return n.handleInstanceLazyProperties(e),r=t.length>0?new e(...t):new e,n.handleInstanceProperties(e,r),this.creatingInstanceClassQueue.pop(),r}catch(t){a.throwError("39001",`依赖注入容器实例化类 "${e.name}" 出错！\n    ${t?.stack||t}`)}}checkCircularDependencies(e){let t;this.creatingInstanceClassQueue.length>0&&(t=this.creatingInstanceClassQueue[this.creatingInstanceClassQueue.length-1]);const n=this.dependenciesGraph.addNodeAndCheckRing(e,t);if(n){const e=n.map((e=>e.name)).join(" -> ");a.throwError("39002",`检测到循环依赖：${e}`)}}handleConstructorArgs(e,t,n){if(e.length>t.length)a.warn("20001",`为 "${n.name}" 的构造方法配置的参数过多！`);else if(e.length<t.length){const n=t.length-e.length;for(let t=0;t<n;t++)e.push(o)}const r=i.getInstance();for(let n=0;n<e.length;n++)if(e[n]===o){const o=r.contains(t[n]);e[n]=o?this.dependenciesSearcher.searchDependency(t[n]):void 0}}static getInstance(){return h.instance||(h.instance=new h),h.instance}}class d{searchDependency(e,t){const n=h.getInstance(),{usingClass:r,usingArgs:o,usingObject:s}=this.getUsingsByConfig(e,t);if(s)return s;const c=i.getInstance().getInjectableOptions(r).type;if("singleton"===c){let e=this.getInstanceFromManager(r,c);return e?(o.length>0&&a.warn("20002",`您试图在为一个已创建的单例依赖传入构造方法参数，这些参数将不会生效！\n    class: ${r.name}`),e):(e=n.createDependency(r,o),this.addInstanceToManager(r,e,c),e)}return n.createDependency(r,o)}getUsingsByConfig(e,t){let n,r=t||[],o=e;for(;n!==o;){let t;n=o;const i=c.getInstance().getConfigMethod(o);if(i){t=new u(o,r);const n=i(t,h.getInstance().getCreatingInstanceClass());if(n&&n!==s){if(n instanceof e)return{usingObject:n};a.throwError("29002",`配置的对象不是 "${e.name}" 或其子类的实例`)}if(o=t.usingClass,r=t.args,n===s)return{usingClass:o,usingArgs:r}}}return{usingClass:n,usingArgs:r}}getInstanceFromManager(e,t){if("singleton"===t&&"singleton"===t){return f.getInstance().getDependency(e)||void 0}}addInstanceToManager(e,t,n){"singleton"===n&&f.getInstance().addDependency(e,t)}static getInstance(){return d.instance||(d.instance=new d),d.instance}}class y{constructor(){this.classToInjectProperties=new WeakMap,this.instanceToLazyInjectProperties=new WeakMap}addInjectProperty(e,n,r,o=t){const s=this.classToInjectProperties.get(e);s?o.lazy?s.lazyProps.push({propName:n,definedClass:r}):s.props.push({propName:n,definedClass:r}):o.lazy?this.classToInjectProperties.set(e,{props:[],lazyProps:[{propName:n,definedClass:r}],lazyPropsHandled:!1}):this.classToInjectProperties.set(e,{props:[{propName:n,definedClass:r}],lazyProps:[],lazyPropsHandled:!1})}handleInstanceProperties(e,t){const n=this.classToInjectProperties.get(e.prototype);if(n){const e=d.getInstance();for(const r of n.props)t[r.propName]=e.searchDependency(r.definedClass)}const r=Object.getPrototypeOf(e);r&&this.handleInstanceProperties(r,t)}handleInstanceLazyProperties(e){const t=this.classToInjectProperties.get(e.prototype);if(t&&!t.lazyPropsHandled){const n=d.getInstance(),r=this.instanceToLazyInjectProperties;for(const o of t.lazyProps)Reflect.defineProperty(e.prototype,o.propName,{enumerable:!0,configurable:!0,get(){let e=r.get(this);if(e){if(Reflect.has(e,o.propName))return e[o.propName]}else e={},r.set(this,e);const t=n.searchDependency(o.definedClass);return e[o.propName]=t,t},set(e){let t=r.get(this);t||(t={},r.set(this,t)),t[o.propName]=e}})}const n=Object.getPrototypeOf(e);n&&this.handleInstanceLazyProperties(n)}handleInstanceStaticProperty(e,n,r,o=t){if(o.lazy){let t;Reflect.defineProperty(e,n,{enumerable:!0,configurable:!0,get:()=>t||(t=d.getInstance().searchDependency(r),t),set(e){t=e}})}else Reflect.set(e,n,d.getInstance().searchDependency(r))}static getInstance(){return y.instance||(y.instance=new y),y.instance}}function g(e,t,n){const r=Reflect.getMetadata("design:type",e,t);r&&r!==Object&&y.getInstance().addInjectProperty(e,t,r,n)}function v(e,t,n,r){n&&n!==Object&&y.getInstance().addInjectProperty(e,t,n,r)}function w(e,t,n){const r=Reflect.getMetadata("design:type",e,t);r&&r!==Object&&y.getInstance().handleInstanceStaticProperty(e,t,r,n)}function _(e,t,n,r){n&&n!==Object&&y.getInstance().handleInstanceStaticProperty(e,t,n,r)}function I(e){return!!e.prototype}const b=d.getInstance();function m(...e){return 1===e.length?b.searchDependency(e[0]):e.map((e=>b.searchDependency(e)))}function P(e,...t){return b.searchDependency(e,t)}function j(e){f.getInstance().removeDependency(e)}function O(e){}const C=function(t=e){return e=>(function(e){const t=i.getInstance();let n=Reflect.getPrototypeOf(e);for(;n;){if("singleton"===t.getInjectableOptions(n)?.type)return!0;n=Reflect.getPrototypeOf(n)}return!1}(e)&&a.throwError("29001",`禁止继承依赖类型为 "singleton" 的类！ 如果您需要单例的子类，请单独在子类上使用 "@Injectable({ type: 'singleton' })"\n    class: ${e.name}`),i.getInstance().collect(e,t),e)},T=function(e){return(t,n,r)=>{c.getInstance().collect(e,r.value)}},M=function(e,t){const n=arguments.length;return function(r,o){const s=I(r);0===n?s?w(r,o):g(r,o):1===n?"function"==typeof e?s?_(r,o,e):v(r,o,e):s?w(r,o,e):g(r,o,e):2===n&&(s?_(r,o,e,t):v(r,o,e,t))}},k=o,x=s})(),r})()));